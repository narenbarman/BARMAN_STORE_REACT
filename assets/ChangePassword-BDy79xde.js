import{r as t,d as C,j as e,L as E,f as S}from"./index-DzGHLpa5.js";/* empty css              */const w=s=>{const r=String(s||"").replace(/\D/g,"");return r.length===12&&r.startsWith("91")?r.slice(2):r.length===11&&r.startsWith("1")?r.slice(1):r},k=s=>w(s).length===10,q=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s);function R(){const[s,r]=t.useState("email"),[i,x]=t.useState(""),[d,f]=t.useState(""),[c,j]=t.useState(""),[l,v]=t.useState(""),[u,P]=t.useState(""),[h,n]=t.useState(!1),[m,o]=t.useState(""),[p,g]=t.useState(""),b=C(),y=async a=>{if(a.preventDefault(),n(!0),o(""),g(""),s==="email"&&!q(i)){o("Please enter a valid email address"),n(!1);return}if(s==="phone"&&!k(d)){o("Please enter a valid phone number (10-11 digits)"),n(!1);return}if(l!==u){o("New passwords do not match"),n(!1);return}if(l.length<6){o("Password must be at least 6 characters"),n(!1);return}try{await S.changePassword(s==="email"?i:null,s==="phone"?w(d):null,c,l),g("Password changed successfully! Redirecting to login..."),setTimeout(()=>{b("/login")},2e3)}catch(N){o(N.message)}finally{n(!1)}};return e.jsx("div",{className:"login-page",children:e.jsxs("div",{className:"login-container",children:[e.jsx("h1",{children:"Change Password"}),e.jsx("p",{className:"login-subtitle",children:"Enter your account details and a new password"}),m&&e.jsx("div",{className:"error-message",children:m}),p&&e.jsx("div",{className:"success-message",children:p}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"login-method-toggle",children:[e.jsx("button",{type:"button",className:`toggle-btn ${s==="email"?"active":""}`,onClick:()=>r("email"),children:"Email"}),e.jsx("button",{type:"button",className:`toggle-btn ${s==="phone"?"active":""}`,onClick:()=>r("phone"),children:"Phone"})]}),s==="email"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:i,onChange:a=>x(a.target.value),placeholder:"Enter your email",required:s==="email"})]}),s==="phone"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phone",value:d,onChange:a=>f(a.target.value),placeholder:"Enter your phone (e.g., 123-456-7890)",required:s==="phone"}),e.jsx("small",{style:{color:"var(--color-text)",opacity:.7},children:"Enter your registered phone number (10 digits, optional +91 prefix)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"currentPassword",children:"Current Password"}),e.jsx("input",{type:"password",id:"currentPassword",value:c,onChange:a=>j(a.target.value),placeholder:"Enter your current password",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"newPassword",children:"New Password"}),e.jsx("input",{type:"password",id:"newPassword",value:l,onChange:a=>v(a.target.value),placeholder:"Enter your new password",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx("input",{type:"password",id:"confirmPassword",value:u,onChange:a=>P(a.target.value),placeholder:"Confirm your new password",required:!0})]}),e.jsx("button",{type:"submit",className:"login-btn",disabled:h,children:h?"Changing Password...":"Change Password"})]}),e.jsxs("p",{className:"login-link",children:["Remember your password? ",e.jsx(E,{to:"/login",children:"Back to Login"})]})]})})}export{R as default};
