import{r as x,d as g,j as s}from"./index-DzGHLpa5.js";import{f,g as C}from"./formatters-C_RfwIqz.js";import{S as b}from"./shopping-bag-CouVmPl1.js";import{M as S}from"./minus-DJ1Rq7RF.js";import{P as k}from"./plus-O5hZR1MK.js";import{T as q}from"./trash-2-DnurnG26.js";const i=r=>{const l=f(Math.abs(r));return s.jsx("span",{className:C(r),children:l})};function O({cartCount:r,setCartCount:l}){const[t,m]=x.useState([]),h=g();x.useEffect(()=>{p()},[]);const p=()=>{const a=localStorage.getItem("barman_cart");a&&m(JSON.parse(a))},d=a=>{m(a),localStorage.setItem("barman_cart",JSON.stringify(a)),l(a.reduce((e,c)=>e+c.quantity,0))},u=(a,e)=>{const c=t.map(n=>{if(n.id===a){const v=n.quantity+e;return{...n,quantity:Math.max(1,Math.min(v,n.stock))}}return n});d(c)},j=a=>{const e=t.filter(c=>c.id!==a);d(e)},y=()=>{d([])},o=()=>t.reduce((a,e)=>a+e.price*e.quantity,0),N=()=>{t.length>0&&h("/checkout")};return t.length===0?s.jsxs("div",{className:"empty-cart fade-in-up",children:[s.jsx("div",{className:"empty-cart-icon",children:s.jsx(b,{size:80})}),s.jsx("h2",{children:"Your cart is empty"}),s.jsx("p",{children:"Add some products to get started!"}),s.jsx("button",{className:"continue-shopping-btn",onClick:()=>h("/products"),children:"Continue Shopping"})]}):s.jsxs("div",{className:"cart-page",children:[s.jsxs("div",{className:"cart-header fade-in-up",children:[s.jsx("h1",{children:"Shopping Cart"}),s.jsxs("p",{children:[r," ",r===1?"item":"items"," in your cart"]})]}),s.jsxs("div",{className:"cart-content",children:[s.jsx("div",{className:"cart-items",children:t.map((a,e)=>s.jsxs("div",{className:"cart-item slide-in-left",style:{animationDelay:`${e*.1}s`},children:[s.jsx("div",{className:"cart-item-image",children:s.jsx("img",{src:a.image,alt:a.name})}),s.jsxs("div",{className:"cart-item-details",children:[s.jsx("h3",{children:a.name}),s.jsx("p",{className:"cart-item-category",children:a.category}),s.jsxs("p",{className:"cart-item-price",children:[i(a.price)," each"]})]}),s.jsxs("div",{className:"cart-item-actions",children:[s.jsxs("div",{className:"quantity-control",children:[s.jsx("button",{className:"quantity-btn",onClick:()=>u(a.id,-1),disabled:a.quantity<=1,children:s.jsx(S,{size:16})}),s.jsx("span",{className:"quantity-display",children:a.quantity}),s.jsx("button",{className:"quantity-btn",onClick:()=>u(a.id,1),disabled:a.quantity>=a.stock,children:s.jsx(k,{size:16})})]}),s.jsxs("div",{className:"cart-item-total",children:[s.jsx("span",{className:"total-label",children:"Total"}),s.jsx("span",{className:"total-value",children:i(a.price*a.quantity)})]}),s.jsx("button",{className:"remove-btn",onClick:()=>j(a.id),title:"Remove item",children:s.jsx(q,{size:18})})]})]},a.id))}),s.jsxs("div",{className:"cart-summary slide-in-right",children:[s.jsx("h2",{children:"Order Summary"}),s.jsxs("div",{className:"summary-details",children:[s.jsxs("div",{className:"summary-row",children:[s.jsx("span",{children:"Subtotal"}),s.jsx("span",{children:i(o())})]}),s.jsxs("div",{className:"summary-row",children:[s.jsx("span",{children:"Shipping"}),s.jsx("span",{children:"Free"})]}),s.jsxs("div",{className:"summary-row",children:[s.jsx("span",{children:"Tax (estimated)"}),s.jsx("span",{children:i(o()*.1)})]}),s.jsx("div",{className:"summary-divider"}),s.jsxs("div",{className:"summary-total",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:i(o()*1.1)})]})]}),s.jsx("button",{className:"checkout-btn",onClick:N,children:"Proceed to Checkout"}),s.jsx("button",{className:"clear-cart-btn",onClick:y,children:"Clear Cart"})]})]})]})}export{O as default};
