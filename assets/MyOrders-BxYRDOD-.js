import{r as s,e as p,j as e,L as h,o as g}from"./index-B15Jacgc.js";import{f as u}from"./formatters-C_RfwIqz.js";function f(){const[d,o]=s.useState([]),[c,l]=s.useState(!0),[n,i]=s.useState(null),a=p();return s.useEffect(()=>{(async()=>{l(!0),i(null);try{const r=JSON.parse(localStorage.getItem("user")||"{}");if(!(r!=null&&r.id)){a("/login");return}const x=await g.getByUser(r.id);o(x||[])}catch(r){i(r.message||"Failed to load orders")}finally{l(!1)}})()},[a]),c?e.jsx("div",{style:{padding:20},children:"Loading your orders..."}):n?e.jsx("div",{style:{padding:20},className:"error-message",children:n}):e.jsxs("div",{style:{padding:20},children:[e.jsx("h1",{children:"My Orders"}),d.length===0?e.jsx("p",{children:"You have no orders yet."}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Order #"}),e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Amount"}),e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Status"}),e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Date"}),e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Actions"})]})}),e.jsx("tbody",{children:d.map(t=>e.jsxs("tr",{style:{borderTop:"1px solid #eee"},children:[e.jsx("td",{style:{padding:"8px"},children:t.order_number||`#${t.id}`}),e.jsx("td",{style:{padding:"8px"},children:u(t.total_amount||0)}),e.jsx("td",{style:{padding:"8px"},children:t.status}),e.jsx("td",{style:{padding:"8px"},children:new Date(t.created_at).toLocaleString()}),e.jsx("td",{style:{padding:"8px"},children:e.jsx(h,{to:`/orders/${t.id}`,children:"View"})})]},t.id))})]})]})}export{f as default};
